//定义一个真实视屏宽度
var truthWidth=null;var videoAllTime=$('.videoState .allTime>a');var videoStudyTime=$('.videoState .studyTime>a');var videoStudyState=$('.videoState .studyState>a');var videoStudyIcon=$('.videoState .studyState>span');function getTimeStyle(time){time=parseInt(time/60);return(time+'分钟')}var videoPlayer=$('#videoPlayer');var myPlayer=null;(function(){var proportion=(1903/800);var outHeight=$(window).width()/proportion;$('.video').height(outHeight);truthWidth=outHeight*(16/9)}());function videoDom(url,img){var framDom='<video id="my-video" class="video-js vjs-default-skin vjs-big-play-centered" controls preload="auto"  poster='+img+' ata-setup="{}" ><source src='+url+' type="video/mp4"></source></video>';myPlayer.dispose();videoPlayer.html(framDom);videoInitialization()}function videoInitialization(){myPlayer=videojs('my-video');myPlayer.ready(function(){myPlayer.height($('.videoPlayer').height());myPlayer.width($('.videoPlayer').width());myPlayer.showStudyTime(myPlayer);videoStudyState.on('click',function(){$(this).html()=='播放'?myPlayer.play():myPlayer.pause()})});myPlayer.showStudyTime=function(myPlayer){var times;myPlayer.on('play',function(){changeStudyDate('&#xe608','学习中');times=setInterval(function(){if(myPlayer.currentTime()){videoStudyTime.html(getTimeStyle(Math.round(myPlayer.currentTime()))+2)}else{clearInterval(times);videoStudyTime.html('0分钟')}},1000)});myPlayer.on('pause',function(){clearInterval(times);changeStudyDate('&#xe60c','播放')})};function changeStudyDate(icons,states){videoStudyState.html(states);videoStudyIcon.html(icons)}}videoInitialization();