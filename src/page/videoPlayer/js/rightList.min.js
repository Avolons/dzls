//返回视屏高度函数
function videoHeight(){var outwidth=$('#videoOut').width();var height=myPlayer.height();myPlayer.width(outwidth);if(outwidth<(truthWidth+30)){myPlayer.height(truthWidth/myPlayer.getProportion)}}function resizeVideo(){myPlayer.getProportion=(16/9);var windowWidth=$(window).width();if(windowWidth>1000){if(parseInt(rightList.css("right"))==0){var videoWidth=windowWidth-340;$('#videoOut').width(videoWidth)}else{var videoWidth=windowWidth;$('#videoOut').width(windowWidth)}videoHeight()}}$(window).resize(function(){resizeVideo()});var rightList=$('#rightList');var videoOut=$('.videoOut');function toggleRightList(width){rightList.animate({right:width+"px"},50)}function toggleVideoOut(width,callback){var oldVideoWidth=videoOut.width();var newVideoWidth=oldVideoWidth-width;videoOut.animate({width:newVideoWidth+"px"},150,function(){resizeVideo();callback})}var alertIndex=$('#alertIndex');var alertChat=$('#alertChat');var alertQuestionnaire=$('#alertQuestionnaire');var index=$('.indexAndChat .index');var chat=$('.indexAndChat .chat');function zindex(domA,domB){domA.css('z-index',2);domB.css('z-index',1)}function changeClass(domA,domB,classN){domA.addClass(classN);domB.removeClass(classN)}alertIndex.on('click',function(){if(alertChat.hasClass('redBackground')){changeClass(alertIndex,alertChat,'redBackground');zindex(index,chat)}else{if(parseInt(rightList.css('right'))<0){toggleVideoOut(340,toggleRightList(0));zindex(index,chat)}else{toggleVideoOut(-340,toggleRightList(-340))}$(this).toggleClass('redBackground')}});alertChat.on('click',function(){if(alertIndex.hasClass('redBackground')){changeClass(alertChat,alertIndex,'redBackground');zindex(chat,index)}else{if(parseInt(rightList.css('right'))<0){toggleVideoOut(340,toggleRightList(0));zindex(chat,index)}else{toggleVideoOut(-340,toggleRightList(-340))}$(this).toggleClass('redBackground')}});var chatWindow=$('#chatWindow');var chatButton=$('#chatbutton');var answerWindow=$('#answerWindow');var answerButton=$('#answerbutton');function chatAndAnswer(buttons,contens,classNames){for(var i=0;i<buttons.length;i+=1){(function(i){buttons[i].on('click',function(){$(this).addClass(classNames);contens[i].show();for(var j=0;j<buttons.length;j+=1){if(i!=j){buttons[j].removeClass(classNames);contens[j].hide()}}})}(i))}}chatAndAnswer([chatButton,answerButton],[chatWindow,answerWindow],'clickStyle_bule');alertQuestionnaire.on('click',function(){layer.open({title:'问卷调查',type:2,area:['700px','550px'],fix:false,maxmin:true,content:'http://zjzx.test.com/zh-CN/chinaaet/Questionnaire/IndexResult?cId=468&sId=1'})});function ajaxQuestionnaire(){var userId=userId||'';var courseId=courseId||'';$.ajax({type:"post",url:"",async:true,data:{userid:'',courseId:''},dataType:json,success:function(data){console.log("nice")},error:function(data){console.log("sorry")}})}var alertExam=$('#alertExam');function ShowExam(){var url='http://yanshi.zjzx.cn/zh-CN/Student/Learn/GetShowExam?id=99&userWareId=163';$.getJSON(url,function(data){if(data.examId==0){layer.msg('该课程不设考试')}else{$("#examTitle").html(data.dataList.examTitle.length>4?data.dataList.examTitle.substring(0,4)+"...":data.dataList.examTitle);$("#examTitle").attr("title",data.dataList.examTitle);$("#examlength").html(data.dataList.examlength);$("#canExamTimes").html(data.dataList.canExamTimes);$("#examUserId").val(data.dataList.examUserId);$("#examId").val(data.dataList.id);$("#statuStr").html(data.dataList.statuStr);layer.open({type:1,title:'在线考试',closeBtn:1,area:['700px','200px'],shadeClose:true,content:$('#examLayer')})}})}alertExam.on('click',function(){ShowExam()});function gotoExam(){if($("#examUserId").val()=="0"){CreateExam()}else{GoIntoExam()}}var waitDialog;function CreateExam(){var index=layer.load();$.getJSON('http://yanshi.zjzx.cn/zh-CN/Student/Learn/CreateQuestionByExamId?id='+$("#examId").val()+"&userWareId=163",function(data){layer.close(index);if(data.error==0){$("#examUserId").val(data.examUserId);GoIntoExam()}else{layer.msg(data.errorMessge)}})}function GoIntoExam(){$.getJSON('http://yanshi.zjzx.cn/zh-CN/Exam/ExamTest/JudgeCanExamTest?euID='+$("#examUserId").val()+'&flag=0',function(data){if(data.result==1){readyExamUrl(0,'http://yanshi.zjzx.cn/zh-CN/Exam/ExamTest/ExamTestOnline?euID='+$("#examUserId").val()+"&passType=1&courseId=107&recordId=76","","",function(){ShowExam()})}else{layer.msg(data.message)}})}function browseDetail(){if($("#examUserId").val()=="0"){layer.msg("未找到答卷详情！")}else{var url='http://yanshi.zjzx.cn/zh-CN/Exam/ExamTest/ExamTestDetail?euID='+$("#examUserId").val();window.open(url)}}